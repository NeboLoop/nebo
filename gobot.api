syntax = "v1"

info (
	title:   "gobot API"
	desc:    "Open source AI assistant platform"
	author:  "GoBot Team"
	version: "1.0.0"
)

// =====================================================
// SETUP TYPES (First-run onboarding)
// =====================================================
type SetupStatusResponse {
	SetupRequired bool `json:"setupRequired"`
	HasAdmin      bool `json:"hasAdmin"`
	SetupComplete bool `json:"setupComplete"`
}

type CompleteSetupResponse {
	Success bool `json:"success"`
}

type CreateAdminRequest {
	Email    string `json:"email"`
	Password string `json:"password"`
	Name     string `json:"name"`
}

type CreateAdminResponse {
	Token        string `json:"token"`
	RefreshToken string `json:"refreshToken"`
	ExpiresAt    int64  `json:"expiresAt"`
	User         User   `json:"user"`
}

type GetPersonalityResponse {
	Content string `json:"content"`
}

type UpdatePersonalityRequest {
	Content string `json:"content"`
}

type UpdatePersonalityResponse {
	Success bool `json:"success"`
}

// =====================================================
// COMMON TYPES
// =====================================================
type Empty {}

type HealthResponse {
	Status    string `json:"status"`
	Version   string `json:"version"`
	Timestamp string `json:"timestamp"`
}

type MessageResponse {
	Message string `json:"message"`
}

// =====================================================
// AUTH TYPES
// =====================================================
type LoginRequest {
	Email    string `json:"email"`
	Password string `json:"password"`
}

type LoginResponse {
	Token        string `json:"token"`
	RefreshToken string `json:"refreshToken"`
	ExpiresAt    int64  `json:"expiresAt"`
}

type RegisterRequest {
	Email    string `json:"email"`
	Password string `json:"password"`
	Name     string `json:"name"`
}

type RefreshTokenRequest {
	RefreshToken string `json:"refreshToken"`
}

type RefreshTokenResponse {
	Token        string `json:"token"`
	RefreshToken string `json:"refreshToken"`
	ExpiresAt    int64  `json:"expiresAt"`
}

type EmailVerificationRequest {
	Token string `json:"token"`
}

type ResendVerificationRequest {
	Email string `json:"email"`
}

type ForgotPasswordRequest {
	Email string `json:"email"`
}

type ResetPasswordRequest {
	Token       string `json:"token"`
	NewPassword string `json:"newPassword"`
}

type AuthConfigResponse {
	GoogleEnabled bool `json:"googleEnabled"`
	GitHubEnabled bool `json:"githubEnabled"`
}

// =====================================================
// USER TYPES
// =====================================================
type User {
	Id            string `json:"id"`
	Email         string `json:"email"`
	Name          string `json:"name"`
	AvatarUrl     string `json:"avatarUrl,omitempty"`
	EmailVerified bool   `json:"emailVerified"`
	CreatedAt     string `json:"createdAt"`
	UpdatedAt     string `json:"updatedAt"`
}

type GetUserResponse {
	User User `json:"user"`
}

type UpdateUserRequest {
	Name      string `json:"name,optional"`
	AvatarUrl string `json:"avatarUrl,optional"`
}

type ChangePasswordRequest {
	CurrentPassword string `json:"currentPassword"`
	NewPassword     string `json:"newPassword"`
}

type DeleteAccountRequest {
	Password string `json:"password"`
}

type UserPreferences {
	EmailNotifications bool   `json:"emailNotifications"`
	MarketingEmails    bool   `json:"marketingEmails"`
	Timezone           string `json:"timezone"`
	Language           string `json:"language"`
	Theme              string `json:"theme"`
}

type GetPreferencesResponse {
	Preferences UserPreferences `json:"preferences"`
}

type UpdatePreferencesRequest {
	EmailNotifications bool   `json:"emailNotifications,optional"`
	MarketingEmails    bool   `json:"marketingEmails,optional"`
	Timezone           string `json:"timezone,optional"`
	Language           string `json:"language,optional"`
	Theme              string `json:"theme,optional"`
}

// =====================================================
// SERVICES
// =====================================================
service gobot {
	@doc "Health check endpoint"
	@handler HealthCheck
	get /health returns (HealthResponse)
}

// =====================================================
// SETUP SERVICES (First-run onboarding)
// =====================================================
@server (
	prefix: /api/v1
	group:  setup
)
service gobot {
	@doc "Check if setup is required (no admin exists)"
	@handler SetupStatus
	get /setup/status returns (SetupStatusResponse)

	@doc "Create the first admin user (only works when no admin exists)"
	@handler CreateAdmin
	post /setup/admin (CreateAdminRequest) returns (CreateAdminResponse)

	@doc "Mark initial setup as complete"
	@handler CompleteSetup
	post /setup/complete returns (CompleteSetupResponse)

	@doc "Get AI personality configuration"
	@handler GetPersonality
	get /setup/personality returns (GetPersonalityResponse)

	@doc "Update AI personality configuration"
	@handler UpdatePersonality
	put /setup/personality (UpdatePersonalityRequest) returns (UpdatePersonalityResponse)
}

@server (
	prefix: /api/v1
	group:  auth
)
service gobot {
	@doc "User login"
	@handler Login
	post /auth/login (LoginRequest) returns (LoginResponse)

	@doc "Register new user"
	@handler Register
	post /auth/register (RegisterRequest) returns (LoginResponse)

	@doc "Refresh authentication token"
	@handler RefreshToken
	post /auth/refresh (RefreshTokenRequest) returns (RefreshTokenResponse)

	@doc "Request password reset"
	@handler ForgotPassword
	post /auth/forgot-password (ForgotPasswordRequest) returns (MessageResponse)

	@doc "Reset password with token"
	@handler ResetPassword
	post /auth/reset-password (ResetPasswordRequest) returns (MessageResponse)

	@doc "Verify email address with token"
	@handler VerifyEmail
	post /auth/verify-email (EmailVerificationRequest) returns (MessageResponse)

	@doc "Resend email verification"
	@handler ResendVerification
	post /auth/resend-verification (ResendVerificationRequest) returns (MessageResponse)

	@doc "Get auth configuration (OAuth providers enabled)"
	@handler GetAuthConfig
	get /auth/config returns (AuthConfigResponse)
}

@server (
	prefix: /api/v1
	group:  user
	jwt:    Auth
)
service gobot {
	@doc "Get current user profile"
	@handler GetCurrentUser
	get /user/me returns (GetUserResponse)

	@doc "Update current user profile"
	@handler UpdateCurrentUser
	put /user/me (UpdateUserRequest) returns (GetUserResponse)

	@doc "Delete current user account"
	@handler DeleteAccount
	delete /user/me (DeleteAccountRequest) returns (MessageResponse)

	@doc "Change password for authenticated user"
	@handler ChangePassword
	post /user/me/change-password (ChangePasswordRequest) returns (MessageResponse)

	@doc "Get user preferences"
	@handler GetPreferences
	get /user/me/preferences returns (GetPreferencesResponse)

	@doc "Update user preferences"
	@handler UpdatePreferences
	put /user/me/preferences (UpdatePreferencesRequest) returns (GetPreferencesResponse)
}

// =====================================================
// NOTIFICATION TYPES
// =====================================================
type Notification {
	Id        string `json:"id"`
	Type      string `json:"type"`
	Title     string `json:"title"`
	Body      string `json:"body,omitempty"`
	ActionUrl string `json:"actionUrl,omitempty"`
	Icon      string `json:"icon,omitempty"`
	ReadAt    string `json:"readAt,omitempty"`
	CreatedAt string `json:"createdAt"`
}

type ListNotificationsRequest {
	Page     int  `form:"page,optional"`
	PageSize int  `form:"pageSize,optional"`
	Unread   bool `form:"unread,optional"`
}

type ListNotificationsResponse {
	Notifications []Notification `json:"notifications"`
	UnreadCount   int            `json:"unreadCount"`
	TotalCount    int            `json:"totalCount"`
}

type GetUnreadCountResponse {
	Count int `json:"count"`
}

type MarkNotificationReadRequest {
	Id string `path:"id"`
}

type DeleteNotificationRequest {
	Id string `path:"id"`
}

// =====================================================
// OAUTH TYPES
// =====================================================
type OAuthProvider {
	Name      string `json:"name"`
	Connected bool   `json:"connected"`
	Email     string `json:"email,omitempty"`
}

type ListOAuthProvidersResponse {
	Providers []OAuthProvider `json:"providers"`
}

type OAuthLoginRequest {
	Provider string `path:"provider"`
	Code     string `json:"code"`
	State    string `json:"state,optional"`
}

type OAuthLoginResponse {
	Token        string `json:"token"`
	RefreshToken string `json:"refreshToken"`
	ExpiresAt    int64  `json:"expiresAt"`
	IsNewUser    bool   `json:"isNewUser"`
}

type GetOAuthUrlRequest {
	Provider    string `path:"provider"`
	RedirectUrl string `form:"redirectUrl,optional"`
}

type GetOAuthUrlResponse {
	Url   string `json:"url"`
	State string `json:"state"`
}

type DisconnectOAuthRequest {
	Provider string `path:"provider"`
}

// =====================================================
// NOTIFICATION SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  notification
	jwt:    Auth
)
service gobot {
	@doc "List user notifications"
	@handler ListNotifications
	get /notifications (ListNotificationsRequest) returns (ListNotificationsResponse)

	@doc "Get unread notification count"
	@handler GetUnreadCount
	get /notifications/unread-count returns (GetUnreadCountResponse)

	@doc "Mark notification as read"
	@handler MarkNotificationRead
	put /notifications/:id/read (MarkNotificationReadRequest) returns (MessageResponse)

	@doc "Mark all notifications as read"
	@handler MarkAllNotificationsRead
	put /notifications/read-all returns (MessageResponse)

	@doc "Delete notification"
	@handler DeleteNotification
	delete /notifications/:id (DeleteNotificationRequest) returns (MessageResponse)
}

// =====================================================
// OAUTH SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  oauth
)
service gobot {
	@doc "Get OAuth authorization URL"
	@handler GetOAuthUrl
	get /oauth/:provider/url (GetOAuthUrlRequest) returns (GetOAuthUrlResponse)

	@doc "OAuth callback - exchange code for tokens"
	@handler OAuthCallback
	post /oauth/:provider/callback (OAuthLoginRequest) returns (OAuthLoginResponse)
}

@server (
	prefix: /api/v1
	group:  oauth
	jwt:    Auth
)
service gobot {
	@doc "List connected OAuth providers"
	@handler ListOAuthProviders
	get /oauth/providers returns (ListOAuthProvidersResponse)

	@doc "Disconnect OAuth provider"
	@handler DisconnectOAuth
	delete /oauth/:provider (DisconnectOAuthRequest) returns (MessageResponse)
}

// =====================================================
// AGENT HUB TYPES
// =====================================================
type AgentConnectRequest {
	AgentId string `json:"agentId"`
}

type AgentConnectResponse {
	Connected bool   `json:"connected"`
	AgentId   string `json:"agentId"`
}

type AgentStatusRequest {
	AgentId string `path:"agentId"`
}

type AgentStatusResponse {
	AgentId   string `json:"agentId"`
	Connected bool   `json:"connected"`
	Uptime    int64  `json:"uptime"`
}

type ListAgentsRequest {}

type AgentInfo {
	AgentId   string `json:"agentId"`
	Connected bool   `json:"connected"`
	CreatedAt string `json:"createdAt"`
}

type ListAgentsResponse {
	Agents []AgentInfo `json:"agents"`
	Total  int         `json:"total"`
}

type AgentSettings {
	AutonomousMode   bool `json:"autonomousMode"`
	AutoApproveRead  bool `json:"autoApproveRead"`
	AutoApproveWrite bool `json:"autoApproveWrite"`
	AutoApproveBash  bool `json:"autoApproveBash"`
}

type GetAgentSettingsResponse {
	Settings AgentSettings `json:"settings"`
}

type UpdateAgentSettingsRequest {
	AutonomousMode   bool `json:"autonomousMode"`
	AutoApproveRead  bool `json:"autoApproveRead"`
	AutoApproveWrite bool `json:"autoApproveWrite"`
	AutoApproveBash  bool `json:"autoApproveBash"`
}

// Simple agent status (single agent model)
type SimpleAgentStatusResponse {
	Connected bool   `json:"connected"`
	AgentId   string `json:"agentId,omitempty"`
	Uptime    int64  `json:"uptime,omitempty"`
}

// Agent sessions (conversation history)
type AgentSession {
	Id           string `json:"id"`
	Name         string `json:"name,omitempty"`
	Summary      string `json:"summary,omitempty"`
	MessageCount int    `json:"messageCount"`
	CreatedAt    string `json:"createdAt"`
	UpdatedAt    string `json:"updatedAt"`
}

type ListAgentSessionsResponse {
	Sessions []AgentSession `json:"sessions"`
	Total    int            `json:"total"`
}

type GetAgentSessionRequest {
	Id string `path:"id"`
}

type SessionMessage {
	Id        int    `json:"id"`
	Role      string `json:"role"`
	Content   string `json:"content,omitempty"`
	CreatedAt string `json:"createdAt"`
}

type GetAgentSessionMessagesResponse {
	Messages []SessionMessage `json:"messages"`
	Total    int              `json:"total"`
}

type DeleteAgentSessionRequest {
	Id string `path:"id"`
}

// =====================================================
// AGENT HUB SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  agent
)
service gobot {
	@doc "List connected agents"
	@handler ListAgents
	get /agents (ListAgentsRequest) returns (ListAgentsResponse)

	@doc "Get agent status"
	@handler GetAgentStatus
	get /agents/:agentId/status (AgentStatusRequest) returns (AgentStatusResponse)

	@doc "Get agent settings"
	@handler GetAgentSettings
	get /agent/settings returns (GetAgentSettingsResponse)

	@doc "Update agent settings"
	@handler UpdateAgentSettings
	put /agent/settings (UpdateAgentSettingsRequest) returns (GetAgentSettingsResponse)

	@doc "Get simple agent status (single agent model)"
	@handler GetSimpleAgentStatus
	get /agent/status returns (SimpleAgentStatusResponse)

	@doc "List agent sessions"
	@handler ListAgentSessions
	get /agent/sessions returns (ListAgentSessionsResponse)

	@doc "Get session messages"
	@handler GetAgentSessionMessages
	get /agent/sessions/:id/messages (GetAgentSessionRequest) returns (GetAgentSessionMessagesResponse)

	@doc "Delete agent session"
	@handler DeleteAgentSession
	delete /agent/sessions/:id (DeleteAgentSessionRequest) returns (MessageResponse)
}

// =====================================================
// PROVIDER / AUTH PROFILE TYPES (AI Provider API Keys)
// =====================================================
type AuthProfile {
	Id        string `json:"id"`
	Name      string `json:"name"`
	Provider  string `json:"provider"` // anthropic, openai, google, ollama
	Model     string `json:"model,omitempty"`
	BaseUrl   string `json:"baseUrl,omitempty"`
	Priority  int    `json:"priority"`
	IsActive  bool   `json:"isActive"`
	CreatedAt string `json:"createdAt"`
	UpdatedAt string `json:"updatedAt"`
}

type ListAuthProfilesResponse {
	Profiles []AuthProfile `json:"profiles"`
}

type CreateAuthProfileRequest {
	Name     string `json:"name"`
	Provider string `json:"provider"`
	ApiKey   string `json:"apiKey"`
	Model    string `json:"model,optional"`
	BaseUrl  string `json:"baseUrl,optional"`
	Priority int    `json:"priority,optional"`
}

type CreateAuthProfileResponse {
	Profile AuthProfile `json:"profile"`
}

type GetAuthProfileRequest {
	Id string `path:"id"`
}

type GetAuthProfileResponse {
	Profile AuthProfile `json:"profile"`
}

type UpdateAuthProfileRequest {
	Id       string `path:"id"`
	Name     string `json:"name,optional"`
	ApiKey   string `json:"apiKey,optional"`
	Model    string `json:"model,optional"`
	BaseUrl  string `json:"baseUrl,optional"`
	Priority int    `json:"priority,optional"`
	IsActive bool   `json:"isActive,optional"`
}

type DeleteAuthProfileRequest {
	Id string `path:"id"`
}

type TestAuthProfileRequest {
	Id string `path:"id"`
}

type TestAuthProfileResponse {
	Success bool   `json:"success"`
	Message string `json:"message"`
	Model   string `json:"model,omitempty"`
}

// =====================================================
// MODELS TYPES
// =====================================================
type ListModelsResponse {
	Models        map[string][]ModelInfo `json:"models"`
	TaskRouting   *TaskRouting           `json:"taskRouting,omitempty"`
	AvailableCLIs *CLIAvailability       `json:"availableCLIs,omitempty"`
}

type CLIAvailability {
	Claude bool `json:"claude"`
	Codex  bool `json:"codex"`
	Gemini bool `json:"gemini"`
}

type TaskRouting {
	Vision    string              `json:"vision,omitempty"`
	Reasoning string              `json:"reasoning,omitempty"`
	Code      string              `json:"code,omitempty"`
	General   string              `json:"general,omitempty"`
	Fallbacks map[string][]string `json:"fallbacks,omitempty"`
}

type ModelPricing {
	Input       float64 `json:"input,omitempty"`
	Output      float64 `json:"output,omitempty"`
	CachedInput float64 `json:"cachedInput,omitempty"`
}

type ModelInfo {
	Id            string        `json:"id"`
	DisplayName   string        `json:"displayName"`
	ContextWindow int           `json:"contextWindow,omitempty"`
	Pricing       *ModelPricing `json:"pricing,omitempty"`
	Capabilities  []string      `json:"capabilities,omitempty"`
	IsActive      bool          `json:"isActive"`
}

type ToggleModelRequest {
	Provider string `path:"provider"`
	ModelId  string `path:"modelId"`
	Active   bool   `json:"active"`
}

type UpdateTaskRoutingRequest {
	Vision    string              `json:"vision,omitempty"`
	Reasoning string              `json:"reasoning,omitempty"`
	Code      string              `json:"code,omitempty"`
	General   string              `json:"general,omitempty"`
	Fallbacks map[string][]string `json:"fallbacks,omitempty"`
}

// =====================================================
// PROVIDER / AUTH PROFILE SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  provider
)
service gobot {
	@doc "List all auth profiles (API keys)"
	@handler ListAuthProfiles
	get /providers returns (ListAuthProfilesResponse)

	@doc "Create a new auth profile"
	@handler CreateAuthProfile
	post /providers (CreateAuthProfileRequest) returns (CreateAuthProfileResponse)

	@doc "List all available models from YAML cache"
	@handler ListModels
	get /models returns (ListModelsResponse)

	@doc "Toggle model active status"
	@handler ToggleModel
	put /models/:provider/:modelId (ToggleModelRequest) returns (MessageResponse)

	@doc "Update task routing configuration"
	@handler UpdateTaskRouting
	put /models/task-routing (UpdateTaskRoutingRequest) returns (MessageResponse)

	@doc "Get auth profile by ID"
	@handler GetAuthProfile
	get /providers/:id (GetAuthProfileRequest) returns (GetAuthProfileResponse)

	@doc "Update auth profile"
	@handler UpdateAuthProfile
	put /providers/:id (UpdateAuthProfileRequest) returns (GetAuthProfileResponse)

	@doc "Delete auth profile"
	@handler DeleteAuthProfile
	delete /providers/:id (DeleteAuthProfileRequest) returns (MessageResponse)

	@doc "Test auth profile (verify API key works)"
	@handler TestAuthProfile
	post /providers/:id/test (TestAuthProfileRequest) returns (TestAuthProfileResponse)
}

// =====================================================
// EXTENSIONS TYPES (Tools, Skills, Plugins)
// =====================================================
type ExtensionTool {
	Name             string `json:"name"`
	Description      string `json:"description"`
	Schema           string `json:"schema,omitempty"`
	RequiresApproval bool   `json:"requiresApproval"`
	IsPlugin         bool   `json:"isPlugin"`
	Path             string `json:"path,omitempty"`
}

type ExtensionSkill {
	Name        string   `json:"name"`
	Description string   `json:"description"`
	Version     string   `json:"version"`
	Triggers    []string `json:"triggers"`
	Tools       []string `json:"tools"`
	Priority    int      `json:"priority"`
	Enabled     bool     `json:"enabled"`
	FilePath    string   `json:"filePath"`
}

type ExtensionChannel {
	Id   string `json:"id"`
	Path string `json:"path"`
}

type ListExtensionsResponse {
	Tools    []ExtensionTool    `json:"tools"`
	Skills   []ExtensionSkill   `json:"skills"`
	Channels []ExtensionChannel `json:"channels"`
}

// =====================================================
// SKILL MANAGEMENT TYPES
// =====================================================
type ToggleSkillRequest {
	Name string `path:"name"`
}

type ToggleSkillResponse {
	Name    string `json:"name"`
	Enabled bool   `json:"enabled"`
}

type GetSkillRequest {
	Name string `path:"name"`
}

type GetSkillResponse {
	Skill ExtensionSkill `json:"skill"`
}

// =====================================================
// EXTENSIONS SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  extensions
)
service gobot {
	@doc "List all extensions (tools, skills, plugins)"
	@handler ListExtensions
	get /extensions returns (ListExtensionsResponse)

	@doc "Toggle skill enabled/disabled"
	@handler ToggleSkill
	post /skills/:name/toggle (ToggleSkillRequest) returns (ToggleSkillResponse)

	@doc "Get single skill details"
	@handler GetSkill
	get /skills/:name (GetSkillRequest) returns (GetSkillResponse)
}

// =====================================================
// CHAT TYPES
// =====================================================
type Chat {
	Id        string `json:"id"`
	Title     string `json:"title"`
	CreatedAt string `json:"createdAt"`
	UpdatedAt string `json:"updatedAt"`
}

type ChatMessage {
	Id        string `json:"id"`
	ChatId    string `json:"chatId"`
	Role      string `json:"role"`
	Content   string `json:"content"`
	Metadata  string `json:"metadata,omitempty"`
	CreatedAt string `json:"createdAt"`
}

type ListChatsRequest {
	Page     int `form:"page,optional"`
	PageSize int `form:"pageSize,optional"`
}

type ListChatsResponse {
	Chats []Chat `json:"chats"`
	Total int    `json:"total"`
}

type GetChatRequest {
	Id string `path:"id"`
}

type GetChatResponse {
	Chat          Chat          `json:"chat"`
	Messages      []ChatMessage `json:"messages"`
	TotalMessages int           `json:"totalMessages"` // Total messages in chat (may be more than returned)
}

type CreateChatRequest {
	Title string `json:"title,optional"`
}

type CreateChatResponse {
	Chat Chat `json:"chat"`
}

type UpdateChatRequest {
	Id    string `path:"id"`
	Title string `json:"title"`
}

type DeleteChatRequest {
	Id string `path:"id"`
}

type SendMessageRequest {
	ChatId  string `json:"chatId"`
	Content string `json:"content"`
	Role    string `json:"role,optional"`
}

type SendMessageResponse {
	Message ChatMessage `json:"message"`
	ChatId  string      `json:"chatId"`
}

// =====================================================
// CHAT SERVICES
// =====================================================
@server (
	prefix: /api/v1
	group:  chat
)
service gobot {
	@doc "List user chats"
	@handler ListChats
	get /chats (ListChatsRequest) returns (ListChatsResponse)

	@doc "Get chat with messages"
	@handler GetChat
	get /chats/:id (GetChatRequest) returns (GetChatResponse)

	@doc "Create new chat"
	@handler CreateChat
	post /chats (CreateChatRequest) returns (CreateChatResponse)

	@doc "Update chat title"
	@handler UpdateChat
	put /chats/:id (UpdateChatRequest) returns (Chat)

	@doc "Delete chat"
	@handler DeleteChat
	delete /chats/:id (DeleteChatRequest) returns (MessageResponse)

	@doc "Send message (creates chat if needed)"
	@handler SendMessage
	post /chats/message (SendMessageRequest) returns (SendMessageResponse)

	@doc "Get companion chat (auto-creates if needed)"
	@handler GetCompanionChat
	get /chats/companion returns (GetChatResponse)

	@doc "List days with messages for history browsing"
	@handler ListChatDays
	get /chats/days (ListChatDaysRequest) returns (ListChatDaysResponse)

	@doc "Get messages for a specific day"
	@handler GetHistoryByDay
	get /chats/history/:day (GetHistoryByDayRequest) returns (GetHistoryByDayResponse)

	@doc "Search chat messages"
	@handler SearchChatMessages
	get /chats/search (SearchChatMessagesRequest) returns (SearchChatMessagesResponse)
}

// =====================================================
// COMPANION MODE TYPES
// =====================================================
type ListChatDaysRequest {
	Page     int `form:"page,optional"`
	PageSize int `form:"pageSize,optional"`
}

type DayInfo {
	Day          string `json:"day"`
	MessageCount int    `json:"messageCount"`
}

type ListChatDaysResponse {
	Days []DayInfo `json:"days"`
}

type GetHistoryByDayRequest {
	Day string `path:"day"`
}

type GetHistoryByDayResponse {
	Day      string        `json:"day"`
	Messages []ChatMessage `json:"messages"`
}

type SearchChatMessagesRequest {
	Query    string `form:"query"`
	Page     int    `form:"page,optional"`
	PageSize int    `form:"pageSize,optional"`
}

type SearchChatMessagesResponse {
	Messages []ChatMessage `json:"messages"`
	Total    int           `json:"total"`
}

